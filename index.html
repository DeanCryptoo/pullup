<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PULLUP | The New Wave of Nightlife</title>
    <link rel="icon" type="image/png" href="logo.png">
    
    <!-- Tailwind CSS (Styling) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Babel (Allows React code to run in browser) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Custom CSS for specific effects -->
    <style>
        :root {
            --color-accent: #ccff00; 
            --color-black: #050505;
        }

        body {
            background-color: var(--color-black);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            width: 100vw;
            -webkit-font-smoothing: antialiased;
        }

        /* Use CSS Variable for accent colors everywhere */
        .text-accent { color: var(--color-accent); }
        .bg-accent { background-color: var(--color-accent); }
        .border-accent { border-color: var(--color-accent); }
        .decoration-accent { text-decoration-color: var(--color-accent); }
        .selection-accent::selection { background-color: var(--color-accent); color: black; }

        /* Hide default cursor on desktop to use our custom one */
        @media (hover: hover) and (pointer: fine) {
            body, a, button, input, textarea, select {
                cursor: none !important;
            }
        }

        /* Smooth Scroll behavior */
        html {
            scroll-behavior: smooth;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #000;
        }
        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--color-accent);
        }

        /* Text Stroke Effects */
        .text-stroke-white {
            -webkit-text-stroke: 1px rgba(255, 255, 255, 0.3);
        }
        .text-stroke-black {
            -webkit-text-stroke: 1px black;
        }

        /* Animation Utilities */
        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-spin-slow {
            animation: spin-slow 8s linear infinite;
        }

        /* Performance Optimizations */
        .gpu-accelerated {
            transform: translateZ(0);
            backface-visibility: hidden;
            perspective: 1000px;
            will-change: transform;
        }
    </style>
</head>
<body class="bg-black text-white font-sans selection-accent overflow-x-hidden w-full">
    
    <!-- SVG Filters for Liquid Distortion -->
    <svg style="position: absolute; width: 0; height: 0;">
        <defs>
            <filter id="liquid-distort">
                <feTurbulence baseFrequency="0.02" numOctaves="3" result="noise" seed="1" />
                <feDisplacementMap in="SourceGraphic" in2="noise" scale="0" xChannelSelector="R" yChannelSelector="G" id="displacement-map" />
            </filter>
        </defs>
    </svg>

    <!-- React Root -->
    <div id="root"></div>

    <!-- React Application Script -->
    <script type="text/babel" data-type="module">
        // Import Dependencies from Cloud (ESM)
        import React, { useState, useEffect, useRef, useCallback } from 'https://esm.sh/react@18.2.0?dev';
        import { createRoot } from 'https://esm.sh/react-dom@18.2.0/client?dev&deps=react@18.2.0';
        import { motion, useScroll, useTransform, useSpring, AnimatePresence, useMotionValue, useMotionTemplate, useVelocity, useAnimationFrame, animate } from 'https://esm.sh/framer-motion@10.16.4?dev&deps=react@18.2.0,react-dom@18.2.0';
        import { ArrowRight, MapPin, Calendar, Music, Instagram, Mail, Menu, X, Disc, Zap, ArrowUpRight, Youtube, MessageCircle, Clock, AlertCircle } from 'https://esm.sh/lucide-react@0.292.0?dev&deps=react@18.2.0';

        // --- DATA ---
        const SOCIALS = {
            instagram: "https://www.instagram.com/pullup_ofc/",
            tiktok: "https://www.tiktok.com/@pullup.ofc",
            youtube: "https://www.youtube.com/@pullup_ofc",
            whatsapp: "https://www.whatsapp.com/channel/0029Vb3YnJV35fM3V9GMNc0q",
            linktree: "https://linktr.ee/pullup_ofc"
        };

        const EVENTS = [
            {
                id: 1,
                city: "BERLIN",
                venue: "Kraftwerk",
                date: "24. OKT",
                isoDate: "2025-10-24T22:00:00",
                lineup: "DJ EZ • SKEPTA • PULLUP SOUNDSYSTEM",
                image: "1.jpg",
                status: "TICKETS",
                scarcity: "available"
            },
            {
                id: 2,
                city: "HAMBURG",
                venue: "Uebel & Gefährlich",
                date: "08. NOV",
                isoDate: "2025-11-08T23:00:00",
                lineup: "AJ TRACEY • OG KEEMO • SOULECTION",
                image: "2.jpg",
                status: "TICKETS",
                scarcity: "normal" 
            },
            {
                id: 3,
                city: "KÖLN",
                venue: "Bootshaus",
                date: "15. DEZ",
                isoDate: "2025-12-15T22:00:00",
                lineup: "METRO BOOMIN • LUCIANO • PULLUP RESIDENTS",
                image: "3.jpg",
                status: "TICKETS",
                scarcity: "available"
            },
            {
                id: 4,
                city: "MÜNCHEN",
                venue: "Blitz Club",
                date: "31. DEZ",
                isoDate: "2025-12-31T23:59:00",
                lineup: "NYE SPECIAL • TRAVIS SCOTT (LIVE)",
                image: "4.jpg",
                status: "BALD VERFÜGBAR",
                scarcity: "soon",
                isSecret: false,
                hasCountdown: true
            }
        ];

        // --- COMPONENTS ---

        // 1. High-Performance Cursor
        const CustomCursor = () => {
            const mouseX = useMotionValue(0);
            const mouseY = useMotionValue(0);
            const [isDesktop, setIsDesktop] = useState(false);
            const smoothX = useSpring(mouseX, { stiffness: 1000, damping: 50 });
            const smoothY = useSpring(mouseY, { stiffness: 1000, damping: 50 });

            useEffect(() => {
                if (window.matchMedia("(hover: hover) and (pointer: fine)").matches) setIsDesktop(true);
                const handleMouseMove = (e) => { mouseX.set(e.clientX); mouseY.set(e.clientY); };
                window.addEventListener('mousemove', handleMouseMove);
                return () => window.removeEventListener('mousemove', handleMouseMove);
            }, [mouseX, mouseY]);

            if (!isDesktop) return null;

            return (
                <motion.div
                    className="fixed top-0 left-0 w-6 h-6 rounded-full pointer-events-none z-[9999] mix-blend-difference will-change-transform"
                    style={{
                        x: smoothX,
                        y: smoothY,
                        translateX: "-50%",
                        translateY: "-50%",
                        backgroundColor: 'var(--color-accent)'
                    }}
                />
            );
        };

        // 2. Decrypted Text Effect
        const DecryptedText = ({ text, className, revealDelay = 0, animateOnHover = false }) => {
            const [displayText, setDisplayText] = useState(text);
            const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890!@#$%^&*";
            
            const scramble = useCallback(() => {
                let iteration = 0;
                let interval = setInterval(() => {
                    setDisplayText(prev => 
                        text.split("").map((letter, index) => {
                            if (index < iteration) {
                                return text[index];
                            }
                            return chars[Math.floor(Math.random() * chars.length)];
                        }).join("")
                    );

                    if (iteration >= text.length) {
                        clearInterval(interval);
                    }
                    
                    iteration += 1 / 3; 
                }, 30);
                return interval;
            }, [text]);

            useEffect(() => {
                const timeout = setTimeout(() => {
                    scramble();
                }, revealDelay);
                return () => clearTimeout(timeout);
            }, [revealDelay, scramble]);

            const handleMouseEnter = () => {
                if (animateOnHover) {
                    scramble();
                }
            };

            return (
                <span 
                    className={className} 
                    onMouseEnter={handleMouseEnter}
                >
                    {displayText}
                </span>
            );
        };

        // 3. Magnetic Button
        const MagneticButton = ({ children, className, onClick }) => {
            const ref = useRef(null);
            const [position, setPosition] = useState({ x: 0, y: 0 });
            
            const handleMouse = (e) => {
                const { clientX, clientY } = e;
                const { height, width, left, top } = ref.current.getBoundingClientRect();
                const middleX = clientX - (left + width / 2);
                const middleY = clientY - (top + height / 2);
                setPosition({ x: middleX * 0.2, y: middleY * 0.2 });
            };

            const reset = () => {
                setPosition({ x: 0, y: 0 });
            };

            const { x, y } = position;

            return (
                <motion.button
                    ref={ref}
                    className={className}
                    onClick={onClick}
                    animate={{ x, y }}
                    transition={{ type: "spring", stiffness: 150, damping: 15, mass: 0.1 }}
                    onMouseMove={handleMouse}
                    onMouseLeave={reset}
                >
                    {children}
                </motion.button>
            );
        };

        // 4. Countdown Component
        const Countdown = ({ targetDate }) => {
            const [time, setTime] = useState("00:00:00:00");
            
            useEffect(() => {
                const target = new Date(targetDate).getTime();
                
                const updateTimer = () => {
                    const now = new Date().getTime();
                    const diff = target - now;
                    
                    if (diff <= 0) {
                        setTime("LIVE NOW");
                        return;
                    }
                    
                    const d = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const s = Math.floor((diff % (1000 * 60)) / 1000);
                    
                    setTime(`${d}d ${h}h ${m}m ${s}s`);
                };

                updateTimer(); // Initial call
                const interval = setInterval(updateTimer, 1000);
                
                return () => clearInterval(interval);
            }, [targetDate]);

            return <span className="font-mono text-accent text-sm md:text-base font-bold tracking-widest">{time}</span>;
        };

        // 5. Scratch Card Component
        const ScratchCard = ({ width, height, onReveal, children }) => {
            const canvasRef = useRef(null);
            const [isRevealed, setIsRevealed] = useState(false);

            useEffect(() => {
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                
                ctx.fillStyle = '#1a1a1a';
                ctx.fillRect(0, 0, width, height);
                ctx.fillStyle = '#333';
                ctx.font = 'bold 20px monospace';
                ctx.fillText("SCRATCH TO REVEAL", 20, height/2 + 5);
                
                for(let i=0; i<50; i++) {
                    ctx.fillStyle = Math.random() > 0.5 ? '#222' : '#111';
                    ctx.fillRect(Math.random() * width, Math.random() * height, 2, 2);
                }
            }, [width, height]);

            const handleMouseMove = (e) => {
                if (isRevealed) return;
                const canvas = canvasRef.current;
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const ctx = canvas.getContext('2d');
                ctx.globalCompositeOperation = 'destination-out';
                ctx.beginPath();
                ctx.arc(x, y, 20, 0, Math.PI * 2);
                ctx.fill();
            };

            return (
                <div className="relative overflow-hidden rounded-md" style={{ width, height }}>
                    <div className="absolute inset-0 flex items-center justify-center bg-black border border-white/20">{children}</div>
                    <canvas ref={canvasRef} width={width} height={height} onMouseMove={handleMouseMove} onTouchMove={handleMouseMove} className={`absolute inset-0 z-10 cursor-crosshair transition-opacity duration-1000 ${isRevealed ? 'opacity-0 pointer-events-none' : 'opacity-100'}`} />
                </div>
            );
        };

        // 6. Glitch Transition
        const GlitchTransition = ({ isActive }) => {
            if (!isActive) return null;
            return (
                <div className="fixed inset-0 z-[100] pointer-events-none mix-blend-difference flex flex-col">
                    {[...Array(10)].map((_, i) => (
                        <motion.div
                            key={i}
                            className="w-full bg-white h-[10vh]"
                            initial={{ x: i % 2 === 0 ? '-100%' : '100%' }}
                            animate={{ x: 0 }}
                            exit={{ x: i % 2 === 0 ? '100%' : '-100%' }}
                            transition={{ duration: 0.2, delay: i * 0.02 }}
                        />
                    ))}
                </div>
            );
        };

        // 7. Global Dynamic Noise & Spotlight (OPTIMIZED for Performance)
        const GlobalBackground = () => {
             const mouseX = useMotionValue(0);
             const mouseY = useMotionValue(0);
             const [isDesktop, setIsDesktop] = useState(false);

             // Use springs for smoother, less frequent updates to the transform
             // Adjusted physics: Higher stiffness = faster follow, Lower damping = less lag
             const springX = useSpring(mouseX, { stiffness: 300, damping: 25 });
             const springY = useSpring(mouseY, { stiffness: 300, damping: 25 });

             useEffect(() => {
                if (window.matchMedia("(hover: hover) and (pointer: fine)").matches) {
                    setIsDesktop(true);
                    const handleMouseMove = (e) => {
                        mouseX.set(e.clientX);
                        mouseY.set(e.clientY);
                    };
                    window.addEventListener('mousemove', handleMouseMove);
                    return () => window.removeEventListener('mousemove', handleMouseMove);
                }
             }, []);

             return (
                 <div className="fixed inset-0 z-0 pointer-events-none">
                    {/* GPU-Accelerated Spotlight using Translate instead of Background Repaint */}
                    {isDesktop && (
                        <motion.div
                            className="absolute top-0 left-0 w-[500px] h-[500px] rounded-full opacity-20 mix-blend-screen will-change-transform"
                            style={{ 
                                x: springX, 
                                y: springY, 
                                translateX: "-50%", 
                                translateY: "-50%",
                                background: 'radial-gradient(circle, var(--color-accent) 0%, rgba(0,0,0,0) 70%)'
                            }}
                        />
                    )}
                    {/* OPTIMIZED NOISE TEXTURE (No SVG Filter) */}
                    <div className="absolute inset-0 opacity-[0.05] mix-blend-overlay"
                         style={{
                             backgroundImage: `url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`,
                             backgroundRepeat: 'repeat',
                         }}
                    />
                 </div>
             );
        };

        // 8. Preloader
        const Preloader = ({ setLoading }) => {
            useEffect(() => {
                const timer = setTimeout(() => {
                    setLoading(false);
                }, 2000);
                return () => clearTimeout(timer);
            }, [setLoading]);

            return (
                <motion.div 
                    className="fixed inset-0 z-[100] bg-black flex items-center justify-center p-8"
                    initial={{ y: 0 }}
                    exit={{ y: "-100%", transition: { duration: 0.8, ease: [0.76, 0, 0.24, 1] } }}
                >
                    <motion.div 
                        initial={{ opacity: 0, scale: 0.9 }}
                        animate={{ opacity: 1, scale: 1 }}
                        transition={{ duration: 1, ease: "easeOut" }}
                        className="flex flex-col items-center"
                    >
                         <img 
                            src="logo.png" 
                            alt="PULLUP Logo" 
                            className="w-48 md:w-64 object-contain mb-4"
                            onError={(e) => {
                                e.target.style.display = 'none';
                                document.getElementById('fallback-logo').style.display = 'block';
                            }}
                        />
                        <div id="fallback-logo" style={{display: 'none'}}>
                            <DecryptedText text="PULLUP" className="text-6xl md:text-8xl font-black text-accent tracking-tighter" />
                        </div>
                    </motion.div>
                </motion.div>
            );
        };

        const Header = ({ onLinkClick }) => {
            const [isMenuOpen, setIsMenuOpen] = useState(false);

            return (
                <>
                    <header className="fixed top-0 left-0 w-full z-40 px-4 md:px-6 py-4 md:py-6 flex justify-between items-center mix-blend-difference text-white pointer-events-none">
                        <a href="#" className="pointer-events-auto text-xl md:text-2xl font-black tracking-tighter uppercase font-sans z-50 hover:scale-105 transition-transform">
                            Pullup
                        </a>
                        
                        <MagneticButton 
                            onClick={() => setIsMenuOpen(true)}
                            className="pointer-events-auto group flex items-center gap-2 z-50 cursor-none"
                        >
                            <span className="hidden md:block text-sm font-medium uppercase tracking-widest group-hover:text-accent transition-colors">Menu</span>
                            <div className="p-2 rounded-full border border-transparent group-hover:border-accent transition-all">
                                <Menu className="w-6 h-6 md:w-8 md:h-8 group-hover:text-accent transition-colors" />
                            </div>
                        </MagneticButton>
                    </header>

                    <AnimatePresence>
                        {isMenuOpen && (
                            <motion.div 
                                initial={{ opacity: 0, x: "100%" }}
                                animate={{ opacity: 1, x: 0 }}
                                exit={{ opacity: 0, x: "100%" }}
                                transition={{ type: "tween", duration: 0.5, ease: [0.76, 0, 0.24, 1] }}
                                className="fixed inset-0 z-[60] bg-accent text-black flex flex-col justify-between p-6 md:p-12 overflow-hidden"
                                style={{ backgroundColor: 'var(--color-accent)' }}
                            >
                                <div className="flex justify-between items-center border-b border-black/10 pb-6">
                                    <span className="text-xl font-bold tracking-tight">PULLUP</span>
                                    <button onClick={() => setIsMenuOpen(false)} className="hover:rotate-90 transition-transform duration-300">
                                        <X className="w-8 h-8 md:w-10 md:h-10" />
                                    </button>
                                </div>

                                <nav className="flex flex-col gap-2 md:gap-4 overflow-y-auto">
                                    {["Events", "Artists", "Gallery", "About", "Contact"].map((item, i) => (
                                        <motion.a 
                                            key={item}
                                            href={item === "Events" ? SOCIALS.linktree : `#${item.toLowerCase()}`}
                                            target={item === "Events" ? "_blank" : undefined}
                                            initial={{ x: 100, opacity: 0 }}
                                            animate={{ x: 0, opacity: 1 }}
                                            transition={{ delay: 0.1 * i, duration: 0.5 }}
                                            onClick={(e) => { 
                                                e.preventDefault(); 
                                                setIsMenuOpen(false);
                                                if(item === "Events") {
                                                    onLinkClick(SOCIALS.linktree, true);
                                                } else {
                                                    onLinkClick(`#${item.toLowerCase()}`, false);
                                                }
                                            }}
                                            className="text-5xl md:text-8xl font-black uppercase tracking-tighter hover:text-white hover:translate-x-4 transition-all cursor-none w-fit block"
                                        >
                                            <DecryptedText text={item} animateOnHover={true} />
                                        </motion.a>
                                    ))}
                                </nav>

                                <div className="flex flex-col md:flex-row justify-between md:items-end text-sm md:text-base font-medium uppercase tracking-widest border-t border-black/10 pt-6 gap-4">
                                    <div className="flex flex-col gap-1">
                                        <span>Berlin, Germany</span>
                                        <span>est. 2024</span>
                                    </div>
                                    <div className="flex gap-4 md:gap-8 flex-wrap">
                                        <a href={SOCIALS.instagram} onClick={(e) => { e.preventDefault(); onLinkClick(SOCIALS.instagram, true); }} className="hover:underline">Instagram</a>
                                        <a href={SOCIALS.tiktok} onClick={(e) => { e.preventDefault(); onLinkClick(SOCIALS.tiktok, true); }} className="hover:underline">TikTok</a>
                                        <a href={SOCIALS.youtube} onClick={(e) => { e.preventDefault(); onLinkClick(SOCIALS.youtube, true); }} className="hover:underline">YouTube</a>
                                        <a href={SOCIALS.whatsapp} onClick={(e) => { e.preventDefault(); onLinkClick(SOCIALS.whatsapp, true); }} className="hover:underline">Community</a>
                                    </div>
                                </div>
                            </motion.div>
                        )}
                    </AnimatePresence>
                </>
            );
        };

        const Hero = () => {
            const { scrollY } = useScroll();
            const smoothScroll = useSpring(scrollY, { stiffness: 100, damping: 20, mass: 0.5 });
            
            const y1 = useTransform(smoothScroll, [0, 500], [0, 200]);
            const y2 = useTransform(smoothScroll, [0, 500], [0, -150]);
            const opacity = useTransform(smoothScroll, [0, 300], [1, 0]);

            return (
                <section className="relative h-screen w-full flex flex-col justify-center items-center perspective-1000 overflow-hidden">
                     {/* Dynamic Background Image Layer - Optimized */}
                    <motion.div 
                        style={{ opacity }}
                        className="absolute inset-0 w-full h-full z-0 will-change-transform"
                    >
                        <div className="absolute inset-0 bg-gradient-to-b from-black/60 via-black/40 to-black z-10" />
                        <div className="absolute inset-0 bg-black/40 z-10 mix-blend-multiply" />
                        <motion.img 
                            src="1.jpg" 
                            className="w-full h-full object-cover opacity-60 scale-105"
                            initial={{ scale: 1.1 }}
                            animate={{ scale: 1 }}
                            transition={{ duration: 10, repeat: Infinity, repeatType: "reverse" }}
                        />
                    </motion.div>

                     {/* Optimized Glow */}
                    <div 
                        className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[50vw] h-[50vw] md:w-[30vw] md:h-[30vw] opacity-10 animate-pulse pointer-events-none" 
                        style={{
                            background: 'radial-gradient(circle, rgba(204,255,0,1) 0%, rgba(204,255,0,0) 70%)'
                        }}
                    />

                    <div className="z-10 text-center flex flex-col items-center w-full px-4">
                        <motion.div style={{ y: y1 }} className="w-full flex justify-center will-change-transform">
                            <motion.img 
                                src="logo.png" 
                                alt="PULLUP" 
                                className="w-[40%] md:w-[25%] h-auto max-w-2xl object-contain drop-shadow-[0_0_15px_rgba(204,255,0,0.3)]"
                                initial={{ opacity: 0, scale: 0.8, filter: "blur(10px)" }}
                                animate={{ opacity: 1, scale: 1, filter: "blur(0px)" }}
                                transition={{ duration: 1.5, ease: "easeOut" }}
                            />
                        </motion.div>
                        
                        <motion.div style={{ y: y2 }} className="mt-6 md:mt-10 overflow-hidden px-4 max-w-full will-change-transform">
                            <motion.p 
                                initial={{ y: 50, opacity: 0 }}
                                animate={{ y: 0, opacity: 1 }}
                                transition={{ duration: 1, ease: [0.76, 0, 0.24, 1], delay: 0.5 }}
                                className="text-white/90 text-sm md:text-2xl font-bold tracking-[0.15em] md:tracking-[0.2em] uppercase max-w-lg mx-auto text-center drop-shadow-md"
                            >
                                Deutschlands härteste Partyreihe <br/> 
                                <span className="text-accent block mt-2 md:inline md:mt-0">The New Wave of Nightlife</span>
                            </motion.p>
                        </motion.div>
                    </div>

                    <motion.div 
                        initial={{ opacity: 0 }}
                        animate={{ opacity: 1 }}
                        transition={{ delay: 1.5, duration: 1 }}
                        className="absolute bottom-8 md:bottom-12 w-full px-4 md:px-8 flex justify-between items-end text-white/70 text-[10px] md:text-xs uppercase tracking-[0.2em] z-20"
                    >
                        <div className="flex flex-col font-bold">
                            <span>Berlin • Hamburg</span>
                            <span>Köln • München</span>
                        </div>
                        <div className="animate-bounce text-accent">Scrollen ↓</div>
                        <span className="font-bold">Since 2024</span>
                    </motion.div>
                </section>
            );
        };

        const Marquee = () => {
             const { scrollYProgress } = useScroll();
             const x = useTransform(scrollYProgress, [0, 1], [0, -1000]); 
             
            return (
                <div className="w-full py-8 md:py-12 bg-accent overflow-hidden whitespace-nowrap rotate-1 scale-105 border-y-4 border-black z-20 relative">
                    <motion.div 
                        className="flex gap-8 md:gap-12 items-center will-change-transform"
                        style={{ x }}
                    >
                        {[...Array(20)].map((_, i) => (
                            <div key={i} className="flex items-center gap-8 md:gap-12 text-black font-black text-5xl md:text-8xl tracking-tighter uppercase">
                                <span>Pullup Events</span>
                                <Disc className="w-8 h-8 md:w-20 md:h-20 animate-spin-slow" />
                                <span>No Sleep</span>
                                <Zap className="w-8 h-8 md:w-20 md:h-20 fill-current" />
                            </div>
                        ))}
                    </motion.div>
                </div>
            );
        };

        const EventCard = ({ event, onLinkClick }) => {
            const mouseX = useMotionValue(0);
            const mouseY = useMotionValue(0);
            const [isDesktop, setIsDesktop] = useState(false);
            
            // Logic to check if event is in the past
            const eventDate = new Date(event.isoDate);
            const now = new Date();
            const isPast = eventDate < now;
            
            // If past, force status to SOLD OUT and disable countdown
            const displayStatus = isPast ? "SOLD OUT" : event.status;
            const showCountdown = event.hasCountdown && !isPast;

            const cardBackground = useMotionTemplate`radial-gradient(600px circle at ${mouseX}px ${mouseY}px, rgba(255,255,255, 0.05), transparent 40%)`;

            useEffect(() => {
                if (window.matchMedia("(hover: hover) and (pointer: fine)").matches) setIsDesktop(true);
            }, []);

            function handleMouseMove({ currentTarget, clientX, clientY }) {
                if (!isDesktop) return;
                let { left, top } = currentTarget.getBoundingClientRect();
                mouseX.set(clientX - left);
                mouseY.set(clientY - top);
            }

            const handleImageHover = () => {
                const el = document.getElementById("displacement-map");
                if(el) {
                    animate(0, 50, {
                        onUpdate: (v) => el.setAttribute("scale", v),
                        duration: 0.5
                    });
                }
            };
            
            const handleImageLeave = () => {
                 const el = document.getElementById("displacement-map");
                 if(el) {
                    animate(50, 0, {
                        onUpdate: (v) => el.setAttribute("scale", v),
                        duration: 0.5
                    });
                 }
            }

            return (
                <motion.div 
                    initial={{ opacity: 0, y: 50 }}
                    whileInView={{ opacity: 1, y: 0 }}
                    viewport={{ once: false, margin: "-50px" }}
                    onMouseMove={handleMouseMove}
                    className="group relative w-full border-t border-white/20 py-12 md:py-16 cursor-none overflow-hidden"
                >
                    {isDesktop && <motion.div className="pointer-events-none absolute -inset-px opacity-0 transition duration-300 group-hover:opacity-100 z-0" style={{ background: cardBackground }} />}

                    <div className="container mx-auto px-4 md:px-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-6 z-10 relative">
                        <div className="flex items-start gap-6 md:gap-8 md:w-1/3">
                            <span className={`text-4xl md:text-6xl font-black text-transparent bg-clip-text bg-gradient-to-br font-sans tracking-tighter shrink-0 transition-colors duration-500 ${isPast ? 'from-white/20 to-white/10' : 'from-[var(--color-accent)] to-white'}`}>
                                {event.date}
                            </span>
                            <div className="flex flex-col justify-center pt-1 md:pt-0">
                                <span className={`text-lg md:text-2xl font-bold uppercase tracking-tight leading-none mb-1 ${isPast ? 'text-white/40' : 'text-white'}`}>{event.city}</span>
                                <span className="text-white/50 uppercase tracking-widest text-xs md:text-sm">{event.venue}</span>
                                {event.scarcity === 'low' && !isPast && (
                                    <span className="mt-2 text-xs font-bold text-red-500 animate-pulse flex items-center gap-1"><AlertCircle className="w-3 h-3"/> LOW STOCK</span>
                                )}
                            </div>
                        </div>

                        <div className="md:w-1/3 py-2 md:py-0 w-full">
                            {event.isSecret ? (
                                <ScratchCard width={300} height={60}>
                                    <span className="text-white font-black text-xl font-mono">{event.secretReveal}</span>
                                </ScratchCard>
                            ) : (
                                <p className={`font-medium text-base md:text-xl font-mono leading-tight transition-colors break-words ${isPast ? 'text-white/40' : 'text-white group-hover:text-accent'}`}>
                                    {event.lineup}
                                </p>
                            )}
                            {showCountdown && <div className="mt-2"><Countdown targetDate={event.isoDate} /></div>}
                        </div>

                        <div className="w-full md:w-1/4 flex justify-start md:justify-end mt-2 md:mt-0">
                            <a 
                                href={isPast ? undefined : SOCIALS.linktree} 
                                onClick={(e) => { 
                                    e.preventDefault(); 
                                    if(!isPast) onLinkClick(SOCIALS.linktree, true); 
                                }}
                                className={`
                                px-6 md:px-8 py-3 md:py-4 rounded-full uppercase font-bold tracking-wider text-xs md:text-sm transition-all duration-300 flex items-center gap-2
                                ${isPast 
                                    ? 'bg-transparent text-white/20 border border-white/10 cursor-not-allowed' 
                                    : event.status === 'AUSVERKAUFT'
                                        ? 'bg-transparent text-white/30 border border-white/20 cursor-not-allowed'
                                        : 'bg-white text-black group-hover:bg-accent group-hover:scale-105 group-hover:pr-6 cursor-pointer'}
                            `}>
                                {displayStatus}
                                {!isPast && displayStatus !== 'AUSVERKAUFT' && <ArrowUpRight className="w-4 h-4" />}
                            </a>
                        </div>
                    </div>

                    {/* Liquid Distortion Image - Only show for future or active events if desired, or keep for all */}
                    <motion.div
                        className="hidden md:block absolute top-1/2 left-1/2 w-[300px] h-[400px] rounded-sm z-0 pointer-events-none opacity-0 group-hover:opacity-40 transition-all duration-500"
                        style={{ translateX: "-50%", translateY: "-50%", rotate: "6deg", filter: isPast ? 'grayscale(100%)' : 'none' }}
                        onMouseEnter={handleImageHover}
                        onMouseLeave={handleImageLeave}
                    >
                        <img 
                            src={event.image} 
                            alt={event.city}
                            className="w-full h-full object-cover"
                            style={{ filter: "url(#liquid-distort)" }}
                        />
                    </motion.div>
                </motion.div>
            );
        };

        const Events = ({ onLinkClick }) => {
            // Sort events: Future events first (soonest to latest), then past events (latest to oldest)
            const sortedEvents = [...EVENTS].sort((a, b) => {
                const dateA = new Date(a.isoDate);
                const dateB = new Date(b.isoDate);
                const now = new Date();
                
                const isPastA = dateA < now;
                const isPastB = dateB < now;

                if (isPastA && !isPastB) return 1; // A is past, B is future -> B comes first
                if (!isPastA && isPastB) return -1; // A is future, B is past -> A comes first
                
                if (!isPastA && !isPastB) {
                    return dateA - dateB; // Both future: Ascending order (soonest first)
                } else {
                    return dateB - dateA; // Both past: Descending order (most recent first)
                }
            });

            return (
                <section id="events" className="bg-transparent py-20 md:py-32 relative z-10">
                    <div className="container mx-auto px-4 mb-12 md:mb-20">
                        <div className="flex items-start gap-4 mb-4">
                             <div className="w-3 h-3 md:w-4 md:h-4 bg-accent rounded-full mt-2 md:mt-4 animate-pulse shrink-0"></div>
                             <h2 className="text-white text-[12vw] md:text-[6vw] font-black leading-[0.9] uppercase tracking-tighter">
                                <DecryptedText text="Kommende" /> <br className="md:hidden" /> <span className="text-stroke-white text-transparent">Nächte</span>
                            </h2>
                        </div>
                        
                        <p className="text-white/60 text-base md:text-xl max-w-xl ml-7 md:ml-20 border-l border-accent pl-6">
                            Die heißesten Locations. Die besten Sounds. Sicher dir jetzt deinen Platz auf der Gästeliste bevor es zu spät ist.
                        </p>
                    </div>

                    <div className="flex flex-col">
                        {sortedEvents.map((event) => (
                            <EventCard key={event.id} event={event} onLinkClick={onLinkClick} />
                        ))}
                    </div>
                </section>
            );
        };

        const About = () => {
            return (
                <section id="about" className="bg-[#0a0a0a]/50 py-20 md:py-32 text-white relative overflow-hidden z-10 backdrop-blur-sm">
                    <div className="absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-[var(--color-accent)] to-transparent pointer-events-none opacity-5" />
                    
                    <div className="container mx-auto px-4 md:px-8 grid md:grid-cols-2 gap-12 md:gap-16 items-center">
                        <div className="order-2 md:order-1">
                            <h2 className="text-4xl md:text-7xl font-black uppercase tracking-tighter mb-8 leading-[0.9]">
                                Wir sind nicht nur <br/> eine <span className="text-accent">Party.</span>
                            </h2>
                            <div className="space-y-6 text-base md:text-lg text-white/70">
                                <p>
                                    PULLUP wurde aus der Notwendigkeit heraus geboren, die deutsche Clubkultur neu zu definieren. Wir hatten genug von denselben alten Playlists und steifen Crowds.
                                </p>
                                <p>
                                    Unser Ziel ist einfach: Wir schaffen Räume, in denen du dich verlieren kannst. HipHop, Afrobeat, Trap und Future Sounds – kuratiert von den besten DJs Europas.
                                </p>
                                <p className="font-bold text-white text-lg md:text-xl">
                                    Keine Fotos. Keine VIP-Tische. Nur Energie.
                                </p>
                            </div>
                            
                            <div className="mt-12 flex gap-8 md:gap-12 border-t border-white/10 pt-8 overflow-x-auto pb-4 md:pb-0">
                                <div className="flex flex-col shrink-0">
                                    <span className="text-4xl md:text-5xl font-black text-[#ccff00]">50+</span>
                                    <span className="text-xs md:text-sm uppercase tracking-widest text-white/50 mt-2">Events</span>
                                </div>
                                <div className="flex flex-col shrink-0">
                                    <span className="text-4xl md:text-5xl font-black text-[#ccff00]">20k</span>
                                    <span className="text-xs md:text-sm uppercase tracking-widest text-white/50 mt-2">Besucher</span>
                                </div>
                                <div className="flex flex-col shrink-0">
                                    <span className="text-4xl md:text-5xl font-black text-[#ccff00]">100%</span>
                                    <span className="text-xs md:text-sm uppercase tracking-widest text-white/50 mt-2">Vibe</span>
                                </div>
                            </div>
                        </div>

                        <div className="relative h-[400px] md:h-[600px] w-full group overflow-hidden rounded-lg order-1 md:order-2">
                           <div className="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent z-10" />
                           <motion.img 
                             whileHover={{ scale: 1.05 }}
                             transition={{ duration: 0.7 }}
                             src="5.jpg" 
                             className="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700"
                             alt="Crowd energy"
                           />
                           <div className="absolute bottom-8 left-8 z-20">
                                 <div className="bg-[#ccff00] text-black px-4 py-1 text-sm font-bold inline-block mb-4">
                                     PULLUP DOCUMENTARY
                                 </div>
                                 <h3 className="text-2xl md:text-3xl font-bold uppercase">The Movement Begins</h3>
                           </div>
                        </div>
                    </div>
                </section>
            );
        };

        const GalleryTicker = () => {
            const images = [
                "6.jpg",
                "7.jpg",
                "8.jpg",
                "1.jpg",
                "2.jpg"
            ];

            return (
                <section id="gallery" className="bg-black py-16 md:py-24 overflow-hidden border-t border-white/10 z-10 relative">
                    <div className="mb-8 md:mb-12 container mx-auto px-4 flex justify-between items-end">
                         <h2 className="text-white text-3xl md:text-5xl font-bold uppercase tracking-tight">Vibe Check</h2>
                         <span className="text-accent animate-pulse uppercase tracking-widest hidden md:block">Live from the pit</span>
                    </div>
                    
                    <div className="flex gap-4 w-[200vw]">
                        <motion.div 
                            className="flex gap-4 will-change-transform"
                            animate={{ x: "-50%" }}
                            transition={{ duration: 40, ease: "linear", repeat: Infinity }}
                        >
                            {[...images, ...images, ...images].map((src, i) => (
                                <div key={i} className="relative w-[300px] h-[350px] md:w-[400px] md:h-[500px] shrink-0 overflow-hidden rounded-md group cursor-none">
                                    <div className="absolute inset-0 bg-accent mix-blend-multiply opacity-0 group-hover:opacity-60 transition-opacity duration-300 z-10" />
                                    <img src={src} className="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-500 scale-100 group-hover:scale-110" />
                                </div>
                            ))}
                        </motion.div>
                    </div>
                </section>
            );
        };

        const Footer = ({ onLinkClick }) => {
            return (
                <footer id="contact" className="bg-accent text-black pt-20 md:pt-32 pb-8 md:pb-12 rounded-t-[2rem] md:rounded-t-[3rem] -mt-12 relative z-10">
                    <div className="container mx-auto px-6 md:px-12 flex flex-col justify-between min-h-[50vh] md:min-h-[60vh]">
                        
                        <div className="grid md:grid-cols-2 gap-12">
                            <div>
                                <h3 className="text-2xl md:text-3xl font-black mb-6 uppercase tracking-wider">Bleib Updated</h3>
                                <form className="flex border-b-2 border-black pb-4">
                                    <input type="email" placeholder="DEINE EMAIL ADRESSE" className="bg-transparent w-full text-lg md:text-xl placeholder-black/50 focus:outline-none uppercase font-bold" />
                                    <button className="hover:scale-125 transition-transform" type="button">
                                        <ArrowRight className="w-6 h-6 md:w-8 md:h-8" />
                                    </button>
                                </form>
                                <p className="mt-4 text-xs md:text-sm font-bold opacity-60 uppercase tracking-wide">Erfahre als Erster von Secret Locations und neuen Drops.</p>
                            </div>

                            <div className="grid grid-cols-2 gap-8 text-lg md:text-xl font-black uppercase tracking-tight">
                                <ul className="space-y-3">
                                    <li><a href={SOCIALS.linktree} onClick={(e) => { e.preventDefault(); onLinkClick(SOCIALS.linktree, true); }} className="hover:text-white transition-colors"><DecryptedText text="Events" animateOnHover={true} /></a></li>
                                    <li><a href={SOCIALS.instagram} onClick={(e) => { e.preventDefault(); onLinkClick(SOCIALS.instagram, true); }} className="hover:text-white transition-colors"><DecryptedText text="Artists" animateOnHover={true} /></a></li>
                                    <li><a href={SOCIALS.instagram} onClick={(e) => { e.preventDefault(); onLinkClick(SOCIALS.instagram, true); }} className="hover:text-white transition-colors"><DecryptedText text="Gallery" animateOnHover={true} /></a></li>
                                </ul>
                                <ul className="space-y-3">
                                    <li><a href={SOCIALS.instagram} onClick={(e) => { e.preventDefault(); onLinkClick(SOCIALS.instagram, true); }} className="hover:text-white transition-colors"><DecryptedText text="Instagram" animateOnHover={true} /></a></li>
                                    <li><a href={SOCIALS.tiktok} onClick={(e) => { e.preventDefault(); onLinkClick(SOCIALS.tiktok, true); }} className="hover:text-white transition-colors"><DecryptedText text="TikTok" animateOnHover={true} /></a></li>
                                    <li><a href={SOCIALS.youtube} onClick={(e) => { e.preventDefault(); onLinkClick(SOCIALS.youtube, true); }} className="hover:text-white transition-colors"><DecryptedText text="Spotify" animateOnHover={true} /></a></li>
                                    <li><a href={SOCIALS.whatsapp} onClick={(e) => { e.preventDefault(); onLinkClick(SOCIALS.whatsapp, true); }} className="hover:text-white transition-colors"><DecryptedText text="Community" animateOnHover={true} /></a></li>
                                </ul>
                            </div>
                        </div>

                        <div className="mt-16 md:mt-24">
                            <h2 className="text-[15vw] md:text-[18vw] leading-[0.8] font-black tracking-tighter text-center md:text-left select-none pointer-events-none opacity-90">
                                PULLUP
                            </h2>
                            <div className="flex flex-col md:flex-row justify-between items-center md:items-end mt-8 border-t border-black/20 pt-8 text-xs md:text-sm uppercase font-bold tracking-widest gap-2 md:gap-0">
                                <span>© 2025 PULLUP ORG.</span>
                                <span>Made for the Culture.</span>
                            </div>
                        </div>
                    </div>
                </footer>
            );
        };

        // 4. The "Liquid" Scroll Wrapper (The BIG Surprise) - OPTIMIZED
        const LiquidScrollWrapper = ({ children }) => {
            const { scrollY } = useScroll();
            const scrollVelocity = useVelocity(scrollY);
            const smoothVelocity = useSpring(scrollVelocity, {
                damping: 50,
                stiffness: 400
            });
            const skewVelocity = useTransform(smoothVelocity, [-1000, 1000], [-0.5, 0.5]); 
            const scaleVelocity = useTransform(smoothVelocity, [-1000, 1000], [1, 0.995]);
            
            const [isDesktop, setIsDesktop] = useState(false);

            useEffect(() => {
                // Only run liquid effects on desktop if user has not requested reduced motion
                const hasFinePointer = window.matchMedia("(hover: hover) and (pointer: fine)").matches;
                const prefersReducedMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
                
                if (hasFinePointer && !prefersReducedMotion) {
                    setIsDesktop(true);
                }
            }, []);

            if (!isDesktop) return <>{children}</>;

            return (
                <motion.div style={{ skewY: skewVelocity, scale: scaleVelocity }} className="origin-center w-full will-change-transform">
                    {children}
                </motion.div>
            );
        };

        // --- APP ROOT ---

        const App = () => {
            const [loading, setLoading] = useState(true);
            const [isTransitioning, setIsTransitioning] = useState(false);

            const handleLinkClick = (href, newTab) => {
                setIsTransitioning(true);
                setTimeout(() => {
                    setIsTransitioning(false);
                    if (newTab) {
                        window.open(href, '_blank');
                    } else {
                        window.location.href = href;
                    }
                }, 400); // 400ms glitch duration
            };

            return (
                <main className="w-full overflow-hidden bg-black min-h-screen">
                    <CustomCursor />
                    <AnimatePresence>
                        {isTransitioning && <GlitchTransition isActive={isTransitioning} />}
                    </AnimatePresence>
                    <AnimatePresence mode='wait'>
                        {loading && <Preloader setLoading={setLoading} />}
                    </AnimatePresence>
                    
                    {!loading && (
                        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ duration: 1 }}>
                            <GlobalBackground />
                            <Header onLinkClick={handleLinkClick} />
                            <LiquidScrollWrapper>
                                <Hero />
                                <Marquee />
                                <Events onLinkClick={handleLinkClick} />
                                <About />
                                <GalleryTicker />
                                <Footer onLinkClick={handleLinkClick} />
                            </LiquidScrollWrapper>
                        </motion.div>
                    )}
                </main>
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>